<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="/client/layouts/base_layout"
>

<th:block layout:fragment="additional-link-at-head">
    <link rel="stylesheet" href="/client/css/style.css">
</th:block>
<th:block layout:fragment="main-content">
    <section class="h-auto" style="background-color: #fff; margin-top: 28px;">
        <div class="container py-5 h-auto">
            <div class="row d-flex justify-content-center align-items-center h-auto">
                <div class="col col-xl-10">
                    <div class="card shadow-lg p-3 mb-5 bg-white rounded" style="border-radius: 1rem;">
                        <div class="row g-0">

                            <div class="col-md-6 col-lg-12 d-flex align-items-center">
                                <div class="card-body p-4 p-lg-5 text-black">
                                    <th:block th:if="${tokenError == null or tokenError == ''}">
                                        <form method="post" th:action="@{'/client/password/reset?token=' + ${token}}" th:object="${resetPasswordForm}">
                                            <div class="d-flex align-items-center justify-content-center mb-3 pb-1">
                                                <span class="h1 fw-bold mb-0">CẬP NHẬT MẬT KHẨU</span>
                                            </div>
    
                                            <div data-mdb-input-init class="form-outline mb-4">
                                                <label class="form-label text-dark" for="form2Example17">Nhập mật khẩu mới <sup style="color: red;">*</sup></label>
                                                <input type="password" th:field="*{password}" th:errorClass="is-invalid" id="form2Example17" class="form-control form-control-lg" />
                                                <div class="invalid-feedback" th:if="${#fields.hasErrors('password')}" th:errors="*{password}"></div>
                                            </div>
    
                                            <div data-mdb-input-init class="form-outline mb-4">
                                                <label class="form-label text-dark"  for="form2Example17">Xác nhận mật khẩu <sup style="color: red;">*</sup></label>
                                                <input type="password" th:field="*{rePassword}" th:errorClass="is-invalid" class="form-control form-control-lg" />
                                                <div class="invalid-feedback" th:if="${#fields.hasErrors('rePassword')}" th:errors="*{rePassword}"></div>
                                            </div>
    
                                            <div class="pt-1 mb-4">
                                                <button data-mdb-button-init data-mdb-ripple-init class="btn btn-lg btn-block" style="background-color: #223a66; color: #fff;"  type="submit">Cập nhật mật khẩu</button>
                                            </div>
    
                                            <p class="mb-n3 pb-lg-0" style="color: #393f81;"><u><a href="/client/login"
                                                                                                   style="color: #393f81;">Quay lại đăng nhập</a></u></p>
                                        </form>
                                    </th:block>
                                    <div th:if="${tokenError != null}" class="alert alert-danger" role="alert">
                                        <div class="">
                                            <div>
                                                <h4 style="text-align: center; text-transform: uppercase;color: #721c24;" class="fw-bold">Xảy ra lỗi khi xác minh mã token</h4>
                                                <p class="mb-0">Mã token bạn đã cung cấp không tồn tại trong hệ thống hoặc đã hết hạn.</p>
                                                <p class="mb-0">Vui lòng kiểm tra lại mã token và thử lại. Nếu bạn vẫn gặp vấn đề, vui lòng liên hệ với bộ phận hỗ trợ của chúng tôi để được giúp đỡ.</p>
                                            </div>
                                            <div class="text-center">
                                                <a href="/client/login" class="btn btn-primary">Đăng nhập lại</a>
                                            </div>
                                        </div>
                                    </div>                  
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</th:block>